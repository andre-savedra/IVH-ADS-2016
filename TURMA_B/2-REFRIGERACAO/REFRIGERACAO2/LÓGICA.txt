
// IO MAPPINGS:

//inputs
 ON_OFF_BUTTON := I00;
 LEVEL_SENSOR := I01;
 QUALITY_SENSOR := I02;
 PRESSURE_SENSOR := I03;
 EMERGENCY_BUTTON := I04;
    
 //outputs:
 Q00 := MOTOR;
 Q01 := GREEN_LAMP;
 Q02 := RED_LAMP;
 
 // LÃ“GICA DA BORDA P/ LIGAR E DESLIGAR
IF (ON_OFF_BUTTON) THEN
	BUFFER_BUTTON := TRUE;
ELSIF (BUFFER_BUTTON) THEN
	SYSTEM_ON := NOT SYSTEM_ON;
	BUFFER_BUTTON := FALSE;
END_IF
  

IF(SYSTEM_ON) THEN	
	//SISTEMA LIGADO
	IF(EMERGENCY_BUTTON AND QUALITY_SENSOR 
		AND LEVEL_SENSOR 
		AND NOT PRESSURE_SENSOR) THEN		
		MOTOR := TRUE;
		GREEN_LAMP := TRUE;
		RED_LAMP := FALSE;		
	ELSE
		SYSTEM_ON := FALSE;		
	END_IF
ELSE
	// SISTEMA DESLIGADO
	MOTOR := FALSE;
	RED_LAMP := NOT EMERGENCY_BUTTON OR 
				NOT QUALITY_SENSOR OR
		        NOT LEVEL_SENSOR OR 
				PRESSURE_SENSOR;
	GREEN_LAMP := FALSE;	
END_IF 
 